# Copyright Epic Games, Inc. All Rights Reserved.

using { /Verse.org/Tests/VerseTestScriptCmd }

TestFloatToString(Value:float, ExpectedString:string)<reads><decides>:void=
    String := ToString(Value)
    if (String <> ExpectedString):
        DebugPrint("TestFloatToString expected {ExpectedString}, but got {String}")
    String = ExpectedString

TestSignedFloatToString(Value:float, ExpectedString:string)<reads><decides>:void=
    TestFloatToString[Value, ExpectedString]
    TestFloatToString[-Value, "-{ExpectedString}"]

assert{TestFloatToString[0.0, "0.000000"]}
assert{TestFloatToString[NaN, "NaN"]}

assert{TestSignedFloatToString[1.0, "1.000000"]}
assert{TestSignedFloatToString[1.5, "1.500000"]}

assert{TestSignedFloatToString[1.2345678901234567, "1.234568"]}
assert{TestSignedFloatToString[1234567890123456.0, "1234567890123456.000000"]}
assert{TestSignedFloatToString[1e100, "10000000000000000159028911097599180468360808563945281389781327557747838772170381060813469985856815104.000000"]}
assert{TestSignedFloatToString[12.34e100, "123400000000000006119728192307434098747220858281415232564652217634186905927461059131693389964619284480.000000"]}
assert{TestSignedFloatToString[FloatConstants.DoubleMax, "179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368.000000"]}
assert{TestSignedFloatToString[FloatConstants.SmallestSubnormal, "0.000000"]}
assert{TestSignedFloatToString[Inf, "Inf"]}
