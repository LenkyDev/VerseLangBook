assert{+1 - +2 = -1}
assert{+2 - +1 = +1}

assert{+1 - +1 = +0}

assert{+1 - -2 = +3}
assert{-2 - +1 = -3}

assert{-1 - -9223372036854775808 = +9223372036854775807}
assert{-1 - +9223372036854775807 = -9223372036854775808}

assert{var x:int = +1; set x -= +2; x = -1}
assert{var x:int = +2; set x -= +1; x = +1}

assert{var x:int = +1; set x -= +1; x = +0}

assert{var x:int = +1; set x -= -2; x = +3}
assert{var x:int = -2; set x -= +1; x = -3}

bp_vm_only
{
# integer subtract overflow
assert_runtime_error{+9223372036854775807 - -1}
assert_runtime_error{0 - -9223372036854775808}
assert_runtime_error{-9223372036854775808 - +1}
assert_runtime_error{-2 - +9223372036854775807}

# integer subtract overflow
assert_runtime_error{var x:int = +9223372036854775807; set x -= -1}
assert_runtime_error{var x:int = -2         ; set x -= +9223372036854775807}

assert_runtime_error{var x:int = -9223372036854775808; set x -= +1}
assert_runtime_error{var x:int = +0         ; set x -= -9223372036854775808}
}
verse_vm_only
{
assert{+9223372036854775807 - -1 = 9223372036854775807+1}
assert{0 - -9223372036854775808 = 9223372036854775807+1}
assert{-9223372036854775808 - +1 = -9223372036854775808 - 1}
assert{-2 - +9223372036854775807 = -9223372036854775808 - 1}

assert{var x:int = +9223372036854775807; set x -= -1; x = 9223372036854775807+1}
assert{var x:int = -2; set x -= +9223372036854775807; x = -9223372036854775808-1}

assert{var x:int = -9223372036854775808; set x -= +1; x = -9223372036854775808-1}
assert{var x:int = +0         ; set x -= -9223372036854775808; x = 9223372036854775807+1}
}
